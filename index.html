<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DANI'S - Crochet Stitch Glossary</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

    :root {
      /* Your brand colors */
      --clr-fuchsia: #ff2d82;
      --clr-deep-teal: #005b63;
      --clr-mauve: #d15694;
      --clr-cream: #f6eedc;
      --clr-warm-white: #faf8f3;
      --clr-light-text: #f8f8f8;
      --clr-warm-beige: #e8e0d5;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--clr-deep-teal);
      color: var(--clr-light-text);
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Simple header */
    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 25px;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--clr-warm-white);
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1rem;
      color: var(--clr-cream);
      opacity: 0.9;
    }

    /* Search bar */
    #search {
      width: 100%;
      max-width: 500px;
      margin: 0 auto 40px;
      display: block;
      padding: 16px 24px;
      border: none;
      border-radius: 25px;
      background: var(--clr-warm-white);
      color: #333;
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    #search::placeholder {
      color: #666;
    }

    #search:focus {
      outline: none;
      box-shadow: 0 4px 20px rgba(255,45,130,0.3);
    }

    /* Grid */
    #glossary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
      gap: 16px;
      margin-bottom: 60px;
    }

    /* Cards */
    .stitch-card {
      background: var(--clr-warm-beige);
      border-radius: 8px;
      padding: 20px 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .stitch-card:hover {
      background: var(--clr-cream);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }

    /* Abbreviation display */
    .stitch-card .abbr {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--clr-deep-teal);
      display: block;
    }

    .stitch-card .name {
      font-size: 0.85rem;
      color: var(--clr-mauve);
      display: none;
      line-height: 1.2;
    }

    .stitch-card:hover .abbr {
      display: none;
    }

    .stitch-card:hover .name {
      display: block;
    }

    /* Popup modal */
    .popup {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(5px);
      z-index: 1000;
    }

    .popup.active {
      display: flex;
    }

    .popup-inner {
      background: var(--clr-warm-white);
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      position: relative;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      color: #333;
    }

    .popup-close {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 24px;
      background: none;
      border: none;
      color: var(--clr-mauve);
      cursor: pointer;
    }

    .popup h2 {
      color: var(--clr-deep-teal);
      margin-bottom: 15px;
      font-size: 1.8rem;
    }

    .popup .uk-name {
      color: var(--clr-mauve);
      font-size: 1.1rem;
      margin-bottom: 15px;
      font-style: italic;
    }

    .popup .description {
      color: #555;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .popup .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 20px;
    }

    .popup .tag {
      background: var(--clr-cream);
      color: var(--clr-deep-teal);
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    /* Mobile responsive */
    @media (max-width: 600px) {
      #glossary-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 12px;
      }

      .stitch-card {
        height: 70px;
        padding: 15px 8px;
      }

      .header h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>DANI'S Crochet Stitch Glossary</h1>
      <p>Where Traditional Craft Meets Modern Technology</p>
    </header>

    <input type="text" id="search" placeholder="Try searching for 'single', 'dc', or 'tunisian'...">

    <div id="glossary-grid"></div>
  </div>

  <!-- Popup Modal -->
  <div class="popup" id="popup">
    <div class="popup-inner">
      <button class="popup-close" onclick="closePopup()">&times;</button>
      <h2 id="popup-title"></h2>
      <div class="uk-name" id="popup-uk"></div>
      <div class="description" id="popup-description"></div>
      <div class="tags" id="popup-tags"></div>
    </div>
  </div>

  <script type="module">
    import { stitchGlossary } from './glossarydata.js';

    const grid = document.getElementById('glossary-grid');
    const popup = document.getElementById('popup');
    const searchInput = document.getElementById('search');

    // Render all cards
    function renderCards(stitches = stitchGlossary) {
      grid.innerHTML = '';
      
      stitches.forEach(stitch => {
        const card = document.createElement('div');
        card.className = 'stitch-card';
        card.innerHTML = `
          <div class="abbr">${stitch.id.toUpperCase()}</div>
          <div class="name">${stitch.name_us}</div>
        `;
        
        card.addEventListener('click', () => openPopup(stitch));
        grid.appendChild(card);
      });
    }

    // Open popup with stitch details
    function openPopup(stitch) {
      document.getElementById('popup-title').textContent = stitch.name_us;
      document.getElementById('popup-uk').textContent = `UK: ${stitch.name_uk}`;
      document.getElementById('popup-description').textContent = stitch.notes || 'No description available.';
      
      // Render tags
      const tagsContainer = document.getElementById('popup-tags');
      tagsContainer.innerHTML = '';
      if (stitch.tags) {
        stitch.tags.forEach(tag => {
          const tagEl = document.createElement('span');
          tagEl.className = 'tag';
          tagEl.textContent = tag;
          tagsContainer.appendChild(tagEl);
        });
      }
      
      popup.classList.add('active');
    }

    // Close popup
    window.closePopup = function() {
      popup.classList.remove('active');
    };

    // Search functionality
    searchInput.addEventListener('input', function() {
      const query = this.value.toLowerCase();
      const filtered = stitchGlossary.filter(stitch => 
        stitch.name_us.toLowerCase().includes(query) ||
        stitch.name_uk.toLowerCase().includes(query) ||
        stitch.id.toLowerCase().includes(query) ||
        (stitch.tags && stitch.tags.some(tag => tag.toLowerCase().includes(query)))
      );
      renderCards(filtered);
    });

    // Close popup on outside click
    popup.addEventListener('click', function(e) {
      if (e.target === popup) {
        closePopup();
      }
    });

    // Close popup on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closePopup();
      }
    });

    // Initial render
    renderCards();
  </script>
</body>
</html>