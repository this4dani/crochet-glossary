<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DANI'S - Crochet Stitch Glossary</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

    :root {
      --clr-fuchsia: #ff2d82;
      --clr-deep-teal: #005b63;
      --clr-mauve: #d15694;
      --clr-cream: #f6eedc;
      --clr-white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--clr-cream);
      color: #1a1a1a;
      line-height: 1.6;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Subtle home button */
    .home-button {
      position: absolute;
      top: 20px;
      left: 25px;
      font-size: 1rem;
      font-weight: 500;
      color: var(--clr-cream);
      opacity: 0.7;
      cursor: pointer;
      transition: opacity 0.3s ease;
    }

    .home-button:hover {
      opacity: 1;
    }

    /* Main title */
    .header h1 {
      font-size: 2.2rem;
      font-weight: 600;
      color: var(--clr-light-text);
      margin: 0 0 20px 0;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Instructions toggle */
    .instructions-toggle {
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--clr-cream);
      font-size: 0.9rem;
      margin-bottom: 15px;
      opacity: 0.8;
      transition: all 0.3s ease;
    }

    .instructions-toggle:hover {
      opacity: 1;
      color: var(--clr-fuchsia);
    }

    #toggle-arrow {
      transition: transform 0.3s ease;
      font-size: 0.8rem;
    }

    .instructions-toggle.open #toggle-arrow {
      transform: rotate(180deg);
    }

    /* Expandable instructions */
    .instructions {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(0,0,0,0.2);
      border-radius: 15px;
      margin: 0 20px;
    }

    .instructions.open {
      max-height: 200px;
      padding: 20px;
      margin-bottom: 10px;
    }

    .instructions p {
      color: var(--clr-light-text);
      line-height: 1.5;
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Search section - grouped */
    .search-section {
      margin-bottom: 30px;
      text-align: center;
    }

    .search-hint {
      color: var(--clr-cream);
      font-size: 0.8rem;
      margin: 8px 0 0 0;
      opacity: 0.7;
      font-style: italic;
    }

    /* Updated header styling - cozy depth */
    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 40px 30px;
      background: 
        linear-gradient(145deg, 
          rgba(209,86,148,0.25) 0%, 
          rgba(0,91,99,0.3) 40%, 
          rgba(255,45,130,0.2) 100%);
      border-radius: 30px;
      position: relative;
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.4),
        0 8px 25px rgba(209,86,148,0.3),
        inset 0 1px 0 rgba(255,255,255,0.1),
        inset 0 -1px 0 rgba(0,0,0,0.2);
      
      /* Thick blanket texture */
      background-image: 
        linear-gradient(145deg, 
          rgba(209,86,148,0.25) 0%, 
          rgba(0,91,99,0.3) 40%, 
          rgba(255,45,130,0.2) 100%),
        repeating-linear-gradient(
          60deg,
          transparent,
          transparent 8px,
          rgba(255,255,255,0.03) 8px,
          rgba(255,255,255,0.03) 10px
        ),
        repeating-linear-gradient(
          -30deg,
          transparent,
          transparent 12px,
          rgba(0,0,0,0.08) 12px,
          rgba(0,0,0,0.08) 13px
        );
    }

    /* Search bar - dark theme */
    #search {
      width: 100%;
      max-width: 450px;
      margin: 0 auto;
      display: block;
      padding: 16px 24px;
      border: none;
      border-radius: 25px;
      background: 
        linear-gradient(145deg, rgba(42,42,42,0.8) 0%, rgba(58,58,58,0.9) 100%);
      font-size: 16px;
      font-weight: 400;
      color: var(--clr-light-text);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(248,248,248,0.1);
      backdrop-filter: blur(10px);
    }

    #search:focus {
      outline: none;
      box-shadow: 
        0 4px 20px rgba(255,45,130,0.3),
        0 2px 10px rgba(0,91,99,0.2);
      border-color: var(--clr-fuchsia);
      transform: translateY(-2px);
    }

    #search::placeholder {
      color: var(--clr-cream);
      opacity: 0.6;
      font-weight: 300;
    }

    // Add toggle function
    window.toggleInstructions = function() {
      const instructions = document.getElementById('instructions');
      const toggle = document.querySelector('.instructions-toggle');
      
      instructions.classList.toggle('open');
      toggle.classList.toggle('open');
      
      const text = document.getElementById('toggle-text');
      if (instructions.classList.contains('open')) {
        text.textContent = 'Hide instructions';
      } else {
        text.textContent = 'How to use this glossary';
      }
    }

    #search::placeholder {
      color: #999;
      font-weight: 300;
    }

    /* Dark theme with crochet texture */
    #glossary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
      gap: 20px;
      margin-bottom: 60px;
      padding: 30px;
      background: 
        linear-gradient(145deg, rgba(0,91,99,0.2) 0%, rgba(209,86,148,0.15) 100%);
      border-radius: 25px;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,45,130,0.3);
      
      /* Single crochet stitch pattern */
      background-image: 
        linear-gradient(145deg, rgba(0,91,99,0.2) 0%, rgba(209,86,148,0.15) 100%),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 6px,
          rgba(248,248,248,0.02) 6px,
          rgba(248,248,248,0.02) 7px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 12px,
          rgba(248,248,248,0.03) 12px,
          rgba(248,248,248,0.03) 14px
        );
    }

    /* Consistent dark cards */
    .stitch-card {
      background: 
        linear-gradient(145deg, var(--clr-deep-teal) 0%, var(--clr-mauve) 100%);
      border-radius: 18px;
      padding: 20px 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      height: 90px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border: 1px solid rgba(248,248,248,0.1);
      color: var(--clr-light-text);
      
      /* Chain stitch texture overlay */
      background-image: 
        linear-gradient(145deg, var(--clr-deep-teal) 0%, var(--clr-mauve) 100%),
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 4px,
          rgba(248,248,248,0.03) 4px,
          rgba(248,248,248,0.03) 5px
        ),
        repeating-linear-gradient(
          -45deg,
          transparent,
          transparent 8px,
          rgba(248,248,248,0.02) 8px,
          rgba(248,248,248,0.02) 9px
        );
    }

    .stitch-card:hover {
      transform: translateY(-8px) scale(1.06);
      box-shadow: 
        0 15px 40px rgba(255,45,130,0.3),
        0 8px 20px rgba(0,91,99,0.2);
      border-color: var(--clr-fuchsia);
      background: 
        linear-gradient(145deg, var(--clr-mauve) 0%, var(--clr-fuchsia) 100%);
    }

    /* Show abbreviation by default - light text */
    .stitch-card .abbr {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--clr-light-text);
      letter-spacing: 0.5px;
      display: block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    /* Hide full name by default - light text */
    .stitch-card .name {
      font-size: 0.7rem;
      color: var(--clr-cream);
      font-weight: 500;
      line-height: 1.1;
      display: none;
      text-align: center;
      padding: 0 4px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-height: 3.3em;
      overflow: hidden;
      text-shadow: 0 1px 2px rgba(0,0,0,0.4);
    }

    /* Show full name on hover, hide abbreviation */
    .stitch-card:hover .abbr {
      display: none;
    }

    .stitch-card:hover .name {
      display: block;
    }

    /* Modern Lightbox with yarn details */
    .popup {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(42,42,42,0.6);
      backdrop-filter: blur(12px);
      z-index: 1000;
      padding: 20px;
    }

    .popup.active {
      display: flex;
    }

    .popup-inner {
      background: 
        linear-gradient(145deg, var(--clr-soft-white) 0%, var(--clr-yarn-texture) 100%);
      border-radius: 24px;
      padding: 32px;
      max-width: 500px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(209,86,148,0.15);
      
      /* Yarn texture and soft shadows */
      box-shadow: 
        0 25px 50px rgba(0,0,0,0.15),
        0 10px 25px rgba(255,45,130,0.08),
        inset 0 1px 0 rgba(255,255,255,0.8);
        
      /* Subtle crochet edge pattern */
      background-image: 
        linear-gradient(145deg, var(--clr-soft-white) 0%, var(--clr-yarn-texture) 100%),
        radial-gradient(circle at 95% 5%, rgba(255,45,130,0.03) 0%, transparent 50%),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 20px,
          rgba(0,91,99,0.02) 20px,
          rgba(0,91,99,0.02) 22px
        );
    }

    .popup.active .popup-inner {
      transform: scale(1);
    }

    .popup-close {
      position: absolute;
      top: 16px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--clr-mauve);
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
      opacity: 0.7;
    }

    .popup-close:hover {
      background: rgba(255,45,130,0.1);
      color: var(--clr-fuchsia);
      opacity: 1;
      transform: scale(1.1);
    }

    .popup h2 {
      color: var(--clr-fuchsia);
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 20px;
      line-height: 1.2;
      text-shadow: 0 1px 3px rgba(255,45,130,0.1);
    }

    .popup-content p {
      margin-bottom: 16px;
      color: #444;
      line-height: 1.6;
    }

    .popup-content strong {
      color: var(--clr-deep-teal);
      font-weight: 500;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      body {
        padding: 16px;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      #glossary-grid {
        grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
        gap: 10px;
      }
      
      .stitch-card {
        padding: 12px 6px;
        height: 70px;
      }
      
      .popup-inner {
        padding: 24px;
        margin: 16px;
      }
    }

    /* Loading state */
    .loading {
      text-align: center;
      color: #999;
      padding: 60px 20px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <header class="header">
      <div class="home-button">DANI'S</div>
      <h1>Interactive Crochet Stitch Glossary</h1>
      <div class="instructions-toggle" onclick="toggleInstructions()">
        <span id="toggle-text">How to use this glossary</span>
        <span id="toggle-arrow">▼</span>
      </div>
      <div class="instructions" id="instructions">
        <p>Browse stitches by scrolling, or search for specific techniques. Tap any stitch card to see abbreviation, then hover or hold to reveal the full name. Click for detailed information including US/UK terms and helpful notes.</p>
      </div>
    </header>

    <main>
      <div class="search-section">
        <input type="text" id="search" placeholder="Find stitches by name or abbreviation...">
        <p class="search-hint">Try searching for "single", "dc", or "tunisian"</p>
      </div>
      <div id="glossary-grid">
        <div class="loading">Loading stitches...</div>
      </div>
    </main>

  </div>

  <!-- Modern Lightbox -->
  <div class="popup" id="popup">
    <div class="popup-inner">
      <button class="popup-close" onclick="closePopup()">&times;</button>
      <h2 id="popup-title"></h2>
      <div class="popup-content" id="popup-content"></div>
    </div>
  </div>

  <script type="module">
    import { stitchGlossary } from './glossarydata.js';

    const grid = document.getElementById("glossary-grid");
    const searchInput = document.getElementById("search");
    const popup = document.getElementById("popup");

    function renderCards(searchTerm = "") {
      let list = stitchGlossary;
      
      if (searchTerm) {
        list = list.filter(s => 
          s.name_us.toLowerCase().includes(searchTerm.toLowerCase()) ||
          s.name_uk.toLowerCase().includes(searchTerm.toLowerCase()) ||
          s.id.toLowerCase().includes(searchTerm.toLowerCase())
        );
      }

      grid.innerHTML = "";

      if (list.length === 0) {
        grid.innerHTML = '<div class="loading">No stitches found. Try a different search.</div>';
        return;
      }

      list.forEach(stitch => {
        const card = document.createElement("div");
        card.className = "stitch-card";
        card.onclick = () => showPopup(stitch);

        card.innerHTML = `
          <div class="abbr">${stitch.id.toUpperCase()}</div>
          <div class="name">${stitch.name_us}</div>
        `;

        grid.appendChild(card);
      });
    }

    function showPopup(stitch) {
      document.getElementById("popup-title").textContent = stitch.name_us;
      document.getElementById("popup-content").innerHTML = `
        <p><strong>Abbreviation:</strong> ${stitch.id.toUpperCase()}</p>
        <p><strong>US Term:</strong> ${stitch.name_us}</p>
        <p><strong>UK Term:</strong> ${stitch.name_uk}</p>
        <p><strong>Symbol:</strong> ${stitch.symbol}</p>
        <p><strong>Notes:</strong> ${stitch.notes}</p>
      `;
      
      popup.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    window.closePopup = function() {
      popup.classList.remove("active");
      document.body.style.overflow = "auto";
    }

    searchInput.addEventListener("input", () => {
      renderCards(searchInput.value);
    });

    popup.addEventListener("click", (e) => {
      if (e.target === popup) closePopup();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closePopup();
    });

    // Initialize
    setTimeout(() => renderCards(), 100);
  </script>
</body>
</html>