<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DANI'S - Interactive Crochet Stitch Glossary</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

    :root {
      --clr-fuchsia: #ff2d82;
      --clr-deep-teal: #005b63;
      --clr-mauve: #d15694;
      --clr-cream: #f6eedc;
      --clr-warm-white: #faf8f3;
      --clr-soft-white: #f8f6f1;
      --clr-charcoal: #2a2a2a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--clr-deep-teal);
      color: var(--clr-warm-white);
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Clean, integrated header */
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 0;
      background: none;
      border: none;
      box-shadow: none;
      border-radius: 0;
    }

    /* Subtle home button */
    .home-button {
      display: inline-block;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--clr-cream);
      opacity: 0.6;
      cursor: pointer;
      margin-bottom: 15px;
      transition: opacity 0.3s ease;
    }

    .home-button:hover {
      opacity: 1;
    }

    /* Clean main title */
    .header h1 {
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--clr-warm-white);
      margin: 0 0 15px 0;
      letter-spacing: -0.5px;
    }

    /* Simple instructions toggle */
    .instructions-toggle {
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--clr-cream);
      font-size: 0.9rem;
      margin-bottom: 25px;
      opacity: 0.7;
      transition: all 0.3s ease;
    }

    .instructions-toggle:hover {
      opacity: 1;
      color: var(--clr-fuchsia);
    }

    #toggle-arrow {
      transition: transform 0.3s ease;
      font-size: 0.8rem;
    }

    .instructions-toggle.open #toggle-arrow {
      transform: rotate(180deg);
    }

    /* Expandable instructions */
    .instructions {
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      padding: 0;
      margin-bottom: 20px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
    }

    .instructions.open {
      max-height: 120px;
      padding: 15px;
    }

    .instructions p {
      color: var(--clr-warm-white);
      line-height: 1.5;
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Integrated search section */
    .search-section {
      margin-bottom: 30px;
      text-align: center;
    }

    #search {
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      display: block;
      padding: 15px 20px;
      border: 2px solid rgba(248,248,248,0.1);
      border-radius: 8px;
      background: rgba(0,0,0,0.2);
      font-size: 16px;
      color: var(--clr-warm-white);
      transition: border-color 0.3s ease;
      font-family: 'Inter', sans-serif;
    }

    #search:focus {
      outline: none;
      border-color: var(--clr-fuchsia);
    }

    #search::placeholder {
      color: var(--clr-cream);
      opacity: 0.6;
    }

    .search-hint {
      color: var(--clr-cream);
      font-size: 0.8rem;
      margin: 8px 0 0 0;
      opacity: 0.6;
    }

    /* Simple grid container */
    #glossary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
      gap: 16px;
      margin-bottom: 60px;
    }

    /* Clean cards that look like cards */
    .stitch-card {
      background: var(--clr-mauve);
      border-radius: 6px;
      padding: 20px 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      height: 85px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--clr-warm-white);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .stitch-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
      background: var(--clr-fuchsia);
    }

    /* Show abbreviation by default */
    .stitch-card .abbr {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--clr-warm-white);
      letter-spacing: 0.5px;
      display: block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    /* Hide full name by default */
    .stitch-card .name {
      font-size: 0.7rem;
      color: var(--clr-soft-white);
      font-weight: 500;
      line-height: 1.1;
      display: none;
      text-align: center;
      padding: 0 4px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-height: 3.3em;
      overflow: hidden;
      text-shadow: 0 1px 2px rgba(0,0,0,0.4);
    }

    /* Show full name on hover, hide abbreviation */
    .stitch-card:hover .abbr {
      display: none;
    }

    .stitch-card:hover .name {
      display: block;
    }

    /* Modern Lightbox */
    .popup {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(42,42,42,0.8);
      backdrop-filter: blur(12px);
      z-index: 1000;
      padding: 20px;
    }

    .popup.active {
      display: flex;
    }

    .popup-inner {
      background: var(--clr-warm-white);
      border-radius: 20px;
      padding: 32px;
      max-width: 500px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(209,86,148,0.15);
      box-shadow: 
        0 25px 50px rgba(0,0,0,0.3),
        0 10px 25px rgba(209,86,148,0.1);
    }

    .popup.active .popup-inner {
      transform: scale(1);
    }

    .popup-close {
      position: absolute;
      top: 16px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--clr-mauve);
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
      opacity: 0.7;
    }

    .popup-close:hover {
      background: rgba(255,45,130,0.1);
      color: var(--clr-fuchsia);
      opacity: 1;
    }

    .popup h2 {
      color: var(--clr-fuchsia);
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 20px;
      line-height: 1.2;
    }

    .popup-content p {
      margin-bottom: 16px;
      color: var(--clr-charcoal);
      line-height: 1.6;
    }

    .popup-content strong {
      color: var(--clr-deep-teal);
      font-weight: 500;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      body {
        padding: 16px;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      #glossary-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 12px;
      }
      
      .stitch-card {
        padding: 16px 10px;
        height: 75px;
      }
      
      .popup-inner {
        padding: 24px;
        margin: 16px;
      }
    }

    /* Loading state */
    .loading {
      text-align: center;
      color: var(--clr-cream);
      padding: 60px 20px;
      font-style: italic;
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <header class="header">
      <div class="home-button">DANI'S</div>
      <h1>Interactive Crochet Stitch Glossary</h1>
      <div class="instructions-toggle" onclick="toggleInstructions()">
        <span id="toggle-text">How to use this glossary</span>
        <span id="toggle-arrow">â–¼</span>
      </div>
      <div class="instructions" id="instructions">
        <p>Browse stitches by scrolling, or search for specific techniques. Tap any stitch card to see abbreviation, then hover or hold to reveal the full name. Click for detailed information including US/UK terms and helpful notes.</p>
      </div>
    </header>

    <main>
      <div class="search-section">
        <input type="text" id="search" placeholder="Find stitches by name or abbreviation...">
        <p class="search-hint">Try searching for "single", "dc", or "tunisian"</p>
      </div>
      <div id="glossary-grid">
        <div class="loading">Loading stitches...</div>
      </div>
    </main>

  </div>

  <!-- Popup Modal -->
  <div class="popup" id="popup">
    <div class="popup-inner">
      <button class="popup-close" onclick="closePopup()">&times;</button>
      <h2 id="popup-title"></h2>
      <div class="popup-content" id="popup-content"></div>
    </div>
  </div>

  <script type="module">
    import { stitchGlossary } from './glossarydata.js';

    const grid = document.getElementById("glossary-grid");
    const searchInput = document.getElementById("search");
    const popup = document.getElementById("popup");

    function renderCards(searchTerm = "") {
      let list = stitchGlossary;
      
      if (searchTerm) {
        list = list.filter(s => 
          s.name_us.toLowerCase().includes(searchTerm.toLowerCase()) ||
          s.name_uk.toLowerCase().includes(searchTerm.toLowerCase()) ||
          s.id.toLowerCase().includes(searchTerm.toLowerCase())
        );
      }

      grid.innerHTML = "";

      if (list.length === 0) {
        grid.innerHTML = '<div class="loading">No stitches found. Try a different search.</div>';
        return;
      }

      list.forEach(stitch => {
        const card = document.createElement("div");
        card.className = "stitch-card";
        card.onclick = () => showPopup(stitch);

        card.innerHTML = `
          <div class="abbr">${stitch.id.toUpperCase()}</div>
          <div class="name">${stitch.name_us}</div>
        `;

        grid.appendChild(card);
      });
    }

    function showPopup(stitch) {
      document.getElementById("popup-title").textContent = stitch.name_us;
      document.getElementById("popup-content").innerHTML = `
        <p><strong>Abbreviation:</strong> ${stitch.id.toUpperCase()}</p>
        <p><strong>US Term:</strong> ${stitch.name_us}</p>
        <p><strong>UK Term:</strong> ${stitch.name_uk}</p>
        <p><strong>Symbol:</strong> ${stitch.symbol}</p>
        <p><strong>Notes:</strong> ${stitch.notes}</p>
      `;
      
      popup.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    window.closePopup = function() {
      popup.classList.remove("active");
      document.body.style.overflow = "auto";
    }

    window.toggleInstructions = function() {
      const instructions = document.getElementById('instructions');
      const toggle = document.querySelector('.instructions-toggle');
      
      instructions.classList.toggle('open');
      toggle.classList.toggle('open');
      
      const text = document.getElementById('toggle-text');
      if (instructions.classList.contains('open')) {
        text.textContent = 'Hide instructions';
      } else {
        text.textContent = 'How to use this glossary';
      }
    }

    searchInput.addEventListener("input", () => {
      renderCards(searchInput.value);
    });

    popup.addEventListener("click", (e) => {
      if (e.target === popup) closePopup();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closePopup();
    });

    // Initialize
    setTimeout(() => renderCards(), 100);
  </script>
</body>
</html>