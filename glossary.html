<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Crochet Glossary - Comprehensive Stitch Guide</title>
  <meta name="description" content="Interactive crochet glossary with US/UK terminology. 60+ stitches with search and detailed descriptions.">
  
  <!-- Link to your master CSS file -->
  <link rel="stylesheet" href="styles.css"><!-- SVG Symbol Definitions -->
  <svg style="display: none;">
    <defs>
      <!-- Basic stitches -->
      <symbol id="x" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="3" fill="currentColor"/>
        <path d="M8 8l8 8m-8 0l8-8" stroke="currentColor" stroke-width="2"/>
      </symbol>
      <symbol id="T" viewBox="0 0 24 24">
        <path d="M12 2v20M6 6h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="H" viewBox="0 0 24 24">
        <path d="M12 2v20M6 12h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="TT" viewBox="0 0 24 24">
        <path d="M12 2v20M6 4h12M6 8h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="default" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="2" fill="currentColor"/>
      </symbol>
    </defs>
  </svg>
</head>

<body>
  <!-- AdSense Top - STANDARDIZED CLASS NAME -->
  <div class="adsense-top">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9422928756201532"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

  <!-- Navigation -->
  <nav id="nav">
    <a href="index.html"><img src="images/yarn-ball.png" alt="Home" width="100" height="100"></a>
    <a href="glossary.html" class="active"><img src="images/hook.png" alt="Stitch Glossary" width="120" height="120"></a>
    <a href="story.html"><img src="images/sheep.png" alt="Story & Mission" width="95" height="95"></a>
    <a href="follow.html"><img src="images/llama.png" alt="Follow DANI'S" width="180" height="180"></a>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>Interactive Crochet Glossary</h1>
      <p style="color: var(--clr-cream); font-size: 1.2rem; margin-bottom: 30px;">
        A comprehensive guide to crochet stitches in US & UK terminology
      </p>
    </div>

    <!-- Content Container with DARKEST MAUVE background -->
    <div class="glossary-content-container">
      <!-- Search Bar -->
      <div style="text-align: center; margin-bottom: 30px;">
        <input type="text" id="search" placeholder="Search stitches (e.g., 'double crochet' or 'dc')..." 
               style="width: 100%; max-width: 600px; padding: 15px 20px; font-size: 1.1rem; 
                      border-radius: 12px; outline: none;">
      </div>

      <!-- Tips & Tricks Toggle -->
      <div style="text-align: center; margin-bottom: 30px;">
        <button class="tips-toggle" id="tips-toggle" 
                style="padding: 10px 20px; font-size: 1rem; font-weight: 600; 
                       border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
          üí° Show Tips & Tricks
        </button>
      </div>

      <!-- Tips Content (Hidden by default) -->
      <div id="tips-content" style="display: none; background: rgba(255, 255, 255, 0.05); 
                                     border-radius: 15px; padding: 25px; margin-bottom: 30px;
                                     border: 1px solid rgba(255, 255, 255, 0.1);">
        <h3 style="color: var(--clr-coral); margin-bottom: 15px;">Pro Tips:</h3>
        <ul style="color: var(--clr-cream); line-height: 1.8; padding-left: 20px;">
          <li>US and UK terminology can be confusing - UK double crochet = US single crochet!</li>
          <li>Click any stitch card to see detailed information and the UK equivalent</li>
          <li>Use the search to find stitches by name or abbreviation</li>
          <li>Advanced stitches often combine basic stitches - master the basics first</li>
        </ul>
      </div>

      <!-- Glossary Grid -->
      <div id="glossary-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
                                     gap: 20px; margin-bottom: 40px;">
        <!-- Cards will be dynamically inserted here -->
      </div>
    </div>

    <!-- AdSense Mid -->
    <div class="ad-zone ad-zone-mid" style="margin: 40px 0;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-9422928756201532"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>

  <!-- Footer -->
  <div style="text-align: center; margin: 60px 0 80px 0; padding: 40px 20px; opacity: 0.7;">
    <p style="color: #c8b8a8; font-size: 0.9rem; margin: 20px 0; font-family: 'Poppins', sans-serif;">Built with ‚ù§Ô∏è, prayer, coffee, and determination to solve real problems</p>
    <a href="privacy.html" style="color: #c8b8a8; font-size: 0.8rem; text-decoration: none; opacity: 0.6;">Privacy Policy</a>
    <span style="color: #c8b8a8; font-size: 0.8rem; opacity: 0.4; margin: 0 10px;">‚Ä¢</span>
    <a href="privacy.html#terms" style="color: #c8b8a8; font-size: 0.8rem; text-decoration: none; opacity: 0.6;">Terms of Service</a>
    <span style="color: #c8b8a8; font-size: 0.8rem; opacity: 0.4; margin: 0 10px;">‚Ä¢</span>
    <a href="privacy.html#contact" style="color: #c8b8a8; font-size: 0.8rem; text-decoration: none; opacity: 0.6;">Contact</a>
  </div>

  <!-- Popup Modal -->
  <div class="popup" id="popup">
    <div class="popup-inner">
      <button class="popup-close" onclick="closePopup()">&times;</button>
      <h2 id="popup-title"></h2>
      <div class="uk-name" id="popup-uk"></div>
      <div class="description" id="popup-description"></div>
      <div class="tags" id="popup-tags"></div>
    </div>
  </div>

  <script type="module">
    import { stitchGlossary } from './glossarydata.js';

    const searchInput = document.getElementById("search");
    const grid = document.getElementById("glossary-grid");
    const popup = document.getElementById("popup");
    const popupTitle = document.getElementById("popup-title");
    const popupDesc = document.getElementById("popup-description");
    const popupUK = document.getElementById("popup-uk");
    const popupTags = document.getElementById("popup-tags");
    const popupClose = document.querySelector(".popup-close");

    const safeSymbol = (sym) => (/^[a-zA-Z_]/.test(sym) ? sym : `sym_${sym}`);

    function buildCards() {
      grid.innerHTML = '';
      stitchGlossary.forEach((s) => {
        const card = document.createElement("div");
        card.className = "stitch-card";
        card.setAttribute("data-name", s.name_us);
        card.setAttribute("data-tags", s.tags ? s.tags.join(' ') : '');

        const abbr = document.createElement("div");
        abbr.className = "abbr";
        abbr.textContent = s.id.toUpperCase();

        const full = document.createElement("div");
        full.className = "name";
        full.textContent = s.name_us;

        card.append(abbr, full);

        card.onclick = () => {
          popupTitle.textContent = s.name_us;
          popupUK.textContent = `UK: ${s.name_uk}`;
          popupDesc.textContent = s.notes || "No description available.";
          
          // Render tags
          popupTags.innerHTML = '';
          if (s.tags && s.tags.length > 0) {
            s.tags.forEach(tag => {
              const tagEl = document.createElement('span');
              tagEl.className = 'tag';
              tagEl.textContent = tag;
              popupTags.appendChild(tagEl);
            });
          }
          
          popup.classList.add("active");
        };

        grid.appendChild(card);
      });
    }

    function initGlossary() {
      buildCards();

      // Enhanced search - includes tags
      searchInput.addEventListener("input", () => {
        const query = searchInput.value.toLowerCase();
        Array.from(grid.children).forEach((c) => {
          const name = c.getAttribute("data-name").toLowerCase();
          const tags = c.getAttribute("data-tags").toLowerCase();
          const abbr = c.querySelector(".abbr").textContent.toLowerCase();
          
          const matches = name.includes(query) || 
                         abbr.includes(query) || 
                         tags.includes(query);
          
          c.style.display = matches ? "" : "none";
          
          // Add highlight effect to matching cards
          if (matches && query.length > 0) {
            c.classList.add("search-highlight");
          } else {
            c.classList.remove("search-highlight");
          }
        });
      });

      // Tips toggle
      document.getElementById("tips-toggle").addEventListener("click", () => {
        const content = document.getElementById("tips-content");
        const toggle = document.getElementById("tips-toggle");
        if (content.style.display === "none") {
          content.style.display = "block";
          toggle.textContent = "üí° Hide Tips & Tricks";
        } else {
          content.style.display = "none";
          toggle.textContent = "üí° Show Tips & Tricks";
        }
      });

      // Popup close
      popupClose.addEventListener("click", closePopup);
      popup.addEventListener("click", (e) => {
        if (e.target === popup) closePopup();
      });

      window.closePopup = () => {
        popup.classList.remove("active");
      };
    }

    initGlossary();

    // SYNCHRONIZED NAVIGATION BEHAVIOR
    let navigationTicking = false;

    function updateNavigationState() {
        const nav = document.getElementById('nav');
        const scrollY = window.scrollY;
        
        if (scrollY > 40) {  // Consistent trigger point
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
        navigationTicking = false;
    }

    function requestNavigationTick() {
        if (!navigationTicking) {
            requestAnimationFrame(updateNavigationState);
            navigationTicking = true;
        }
    }

    window.addEventListener('scroll', requestNavigationTick, { passive: true });
  </script>
</body>
</html>
