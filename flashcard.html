<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Crochet Flashcards - DANI'S Crochet Technology</title>
    <meta name="description" content="Learn crochet terminology with interactive flashcards. Master US and UK crochet terms with spaced repetition learning.">
    
    <!-- Global Stylesheet -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9422928756201532" crossorigin="anonymous"></script>
    
    <!-- Page-Specific Styles -->
    <style>
    /* Flashcard Page Styles */
    
    /* Flashcard Container */
    .flashcard-container {
        min-height: calc(100vh - 300px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        position: relative;
    }
    
    /* Desktop Layout (768px+) */
    @media (min-width: 769px) {
        .flashcard-layout {
            display: grid;
            grid-template-columns: 200px 1fr 200px;
            grid-template-areas: 
                "left-nav card right-nav"
                "bottom-controls bottom-controls bottom-controls";
            gap: 30px;
            align-items: center;
            max-width: 800px;
            width: 100%;
        }
        
        .left-controls {
            grid-area: left-nav;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .right-controls {
            grid-area: right-nav;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .flashcard-wrapper {
            grid-area: card;
        }
        
        .bottom-controls {
            grid-area: bottom-controls;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .mobile-controls {
            display: none;
        }
    }
    
    /* Mobile Layout (768px and below) */
    @media (max-width: 768px) {
        .flashcard-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            width: 100%;
        }
        
        .left-controls,
        .right-controls,
        .bottom-controls {
            display: none;
        }
        
        .mobile-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
    }
    
    /* Flashcard Component */
    .flashcard {
        width: 400px;
        height: 280px;
        margin: 0 auto;
        perspective: 1000px;
        position: relative;
    }
    
    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        cursor: pointer;
    }
    
    .card-inner.flipped {
        transform: rotateY(180deg);
    }
    
    .card-front,
    .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 15px;
        padding: 30px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: var(--clr-warm-white);
        color: var(--clr-primary-dark);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 3px solid var(--clr-coral);
    }
    
    .card-back {
        transform: rotateY(180deg);
        background: var(--clr-cream);
    }
    
    /* Card Content */
    .term-name {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 15px;
        color: var(--clr-primary-dark);
        text-align: center;
    }
    
    .term-abbreviation {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--clr-fuchsia);
        margin-bottom: 15px;
    }
    
    .term-description {
        font-size: 1.1rem;
        line-height: 1.4;
        text-align: center;
        margin-bottom: 20px;
    }
    
    .term-translations {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .translation-box {
        background: rgba(255, 107, 122, 0.1);
        padding: 8px 15px;
        border-radius: 8px;
        border: 1px solid var(--clr-coral);
        font-size: 0.9rem;
    }
    
    /* Control Buttons */
    .control-btn {
        background: transparent;
        color: var(--clr-coral);
        border: 2px solid var(--clr-coral);
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        white-space: nowrap;
    }
    
    .control-btn:hover {
        background: var(--clr-coral);
        color: white;
        transform: translateY(-2px);
    }
    
    .control-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
    }
    
    /* Progress Display */
    .progress-info {
        text-align: center;
        margin-bottom: 20px;
        color: var(--clr-warm-white);
    }
    
    .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
    }
    
    .progress-fill {
        height: 100%;
        background: var(--clr-coral);
        border-radius: 4px;
        transition: width 0.3s ease;
    }
    
    /* Study Mode Controls */
    .study-modes {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .mode-btn {
        background: transparent;
        color: var(--clr-warm-white);
        border: 2px solid var(--clr-coral);
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }
    
    .mode-btn.active {
        background: var(--clr-coral);
        color: white;
    }
    
    .mode-btn:hover {
        background: var(--clr-coral);
        color: white;
    }
    
    /* Loading State */
    .loading {
        text-align: center;
        color: var(--clr-warm-white);
        font-size: 1.2rem;
        padding: 40px;
    }
    
    .error {
        text-align: center;
        color: var(--clr-coral);
        font-size: 1.1rem;
        padding: 40px;
    }
    </style>
</head>
<body>
    <!-- AdSense Top -->
    <div class="adsense-top">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-9422928756201532"
             data-ad-slot="5658247632"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <!-- Navigation (Uses Global Styles) -->
    <nav id="nav">
        <a href="index.html">
            <img src="images/home-heart-door.png" alt="Home">
        </a>
        <a href="glossary.html">
            <img src="images/file-folder-magazne-lable.png" alt="Glossary">
        </a>
        <a href="story.html">
            <img src="images/slip-knot-first-chain.png" alt="Story">
        </a>
        <a href="follow.html">
            <img src="images/yarn-ball-insert-crochet-hook.png" alt="Social">
        </a>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="header">
            <h1>Interactive Crochet Flashcards</h1>
            <p>Master crochet terminology with spaced repetition learning</p>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading">
            Loading your crochet terms...
        </div>

        <!-- Error State -->
        <div id="error" class="error" style="display: none;">
            Unable to load flashcards. Please try again later.
        </div>

        <!-- Flashcard Interface -->
        <div id="flashcard-interface" class="flashcard-container" style="display: none;">
            <!-- Progress Information -->
            <div class="progress-info">
                <div id="progress-text">Card 1 of 0</div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Study Mode Selection -->
            <div class="study-modes">
                <button class="mode-btn active" onclick="setStudyMode('flashcards')">Flashcards</button>
                <button class="mode-btn" onclick="setStudyMode('learn')">Learn</button>
                <button class="mode-btn" onclick="setStudyMode('test')">Test</button>
                <button class="mode-btn" onclick="setStudyMode('match')">Match</button>
            </div>

            <!-- Responsive Flashcard Layout -->
            <div class="flashcard-layout">
                <!-- Desktop Left Controls -->
                <div class="left-controls">
                    <button onclick="previousCard()" class="control-btn">Previous</button>
                    <button onclick="shuffleCards()" class="control-btn">Shuffle</button>
                </div>

                <!-- Flashcard -->
                <div class="flashcard-wrapper">
                    <div class="flashcard">
                        <div id="card-inner" class="card-inner" onclick="flipCard()">
                            <!-- Front of Card -->
                            <div class="card-front">
                                <div id="front-content">
                                    <div id="term-name" class="term-name">Loading...</div>
                                    <div id="term-description" class="term-description"></div>
                                    <div id="term-translations" class="term-translations"></div>
                                </div>
                            </div>
                            <!-- Back of Card -->
                            <div class="card-back">
                                <div id="back-content">
                                    <div id="term-abbreviation" class="term-abbreviation">...</div>
                                    <div class="term-description">Click or tap to flip back</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Desktop Right Controls -->
                <div class="right-controls">
                    <button onclick="nextCard()" class="control-btn">Next</button>
                    <button onclick="resetProgress()" class="control-btn">Reset</button>
                </div>

                <!-- Desktop Bottom Controls -->
                <div class="bottom-controls">
                    <button onclick="markDifficulty('again')" class="control-btn">Again</button>
                    <button onclick="markDifficulty('hard')" class="control-btn">Hard</button>
                    <button onclick="markDifficulty('good')" class="control-btn">Good</button>
                    <button onclick="markDifficulty('easy')" class="control-btn">Easy</button>
                </div>
            </div>

            <!-- Mobile Controls -->
            <div class="mobile-controls">
                <button onclick="previousCard()" class="control-btn">Previous</button>
                <button onclick="flipCard()" class="control-btn">Flip</button>
                <button onclick="nextCard()" class="control-btn">Next</button>
            </div>
        </div>
    </div>

    <!-- AdSense Bottom -->
    <div class="adsense-bottom">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-9422928756201532"
             data-ad-slot="9304729040"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <!-- Navigation Behavior Script -->
    <script>
        window.addEventListener('scroll', function() {
            const nav = document.getElementById('nav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });
    </script>

    <!-- Flashcard Functionality -->
    <script>
        // Global variables
        let glossaryTerms = [];
        let currentCardIndex = 0;
        let isFlipped = false;
        let studyMode = 'flashcards';
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            loadGlossaryData();
        });
        
        // Load data from API
        async function loadGlossaryData() {
            try {
                console.log('Attempting to load glossary data...');
                const response = await fetch('https://raw.githubusercontent.com/this4dani/crochet-glossary-api/main/terms.json');
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Data loaded:', data.length, 'terms');
                glossaryTerms = data;
                
                // Hide loading, show interface
                document.getElementById('loading').style.display = 'none';
                document.getElementById('flashcard-interface').style.display = 'block';
                
                // Display first card
                displayCard();
                updateProgress();
                
            } catch (error) {
                console.error('Error loading glossary data:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
                
                // Try alternative endpoints
                tryAlternativeEndpoints();
            }
        }
        
        // Try alternative API endpoints
        async function tryAlternativeEndpoints() {
            const alternatives = [
                'https://raw.githubusercontent.com/this4dani/crochet-glossary-api/main/glossary.json',
                'https://raw.githubusercontent.com/this4dani/crochet-glossary-api/main/categories.json'
            ];
            
            for (let url of alternatives) {
                try {
                    console.log('Trying alternative:', url);
                    const response = await fetch(url);
                    if (response.ok) {
                        const data = await response.json();
                        console.log('Alternative data loaded:', data.length, 'terms');
                        glossaryTerms = data;
                        
                        document.getElementById('error').style.display = 'none';
                        document.getElementById('flashcard-interface').style.display = 'block';
                        displayCard();
                        updateProgress();
                        return;
                    }
                } catch (e) {
                    console.log('Alternative failed:', e);
                }
            }
        }
        
        // Display current card
        function displayCard() {
            if (glossaryTerms.length === 0) return;
            
            const term = glossaryTerms[currentCardIndex];
            
            // Update front of card
            document.getElementById('term-name').textContent = term.name || term.term || 'Unknown Term';
            document.getElementById('term-description').textContent = term.description || term.definition || '';
            
            // Update translations if available
            const translationsEl = document.getElementById('term-translations');
            translationsEl.innerHTML = '';
            
            if (term.us_term && term.uk_term) {
                translationsEl.innerHTML = `
                    <div class="translation-box">US: ${term.us_term}</div>
                    <div class="translation-box">UK: ${term.uk_term}</div>
                `;
            }
            
            // Update back of card
            document.getElementById('term-abbreviation').textContent = term.abbreviation || term.abbrev || term.short || '...';
            
            // Reset flip state
            const cardInner = document.getElementById('card-inner');
            cardInner.classList.remove('flipped');
            isFlipped = false;
        }
        
        // Flip the card
        function flipCard() {
            const cardInner = document.getElementById('card-inner');
            cardInner.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }
        
        // Navigate to next card
        function nextCard() {
            if (currentCardIndex < glossaryTerms.length - 1) {
                currentCardIndex++;
            } else {
                currentCardIndex = 0; // Loop back to first card
            }
            displayCard();
            updateProgress();
        }
        
        // Navigate to previous card
        function previousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
            } else {
                currentCardIndex = glossaryTerms.length - 1; // Loop to last card
            }
            displayCard();
            updateProgress();
        }
        
        // Update progress display
        function updateProgress() {
            const progressText = document.getElementById('progress-text');
            const progressFill = document.getElementById('progress-fill');
            
            if (glossaryTerms.length > 0) {
                const current = currentCardIndex + 1;
                const total = glossaryTerms.length;
                const percentage = (current / total) * 100;
                
                progressText.textContent = `Card ${current} of ${total}`;
                progressFill.style.width = `${percentage}%`;
            }
        }
        
        // Set study mode
        function setStudyMode(mode) {
            studyMode = mode;
            
            // Update button states
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            console.log(`Study mode changed to: ${mode}`);
        }
        
        // Mark card difficulty (for spaced repetition)
        function markDifficulty(level) {
            console.log(`Card marked as: ${level}`);
            // Future: Implement spaced repetition algorithm
            nextCard();
        }
        
        // Shuffle cards
        function shuffleCards() {
            for (let i = glossaryTerms.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [glossaryTerms[i], glossaryTerms[j]] = [glossaryTerms[j], glossaryTerms[i]];
            }
            currentCardIndex = 0;
            displayCard();
            updateProgress();
        }
        
        // Reset progress
        function resetProgress() {
            currentCardIndex = 0;
            displayCard();
            updateProgress();
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            switch(event.code) {
                case 'Space':
                    event.preventDefault();
                    flipCard();
                    break;
                case 'ArrowLeft':
                    previousCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case 'Digit1':
                    markDifficulty('again');
                    break;
                case 'Digit2':
                    markDifficulty('hard');
                    break;
                case 'Digit3':
                    markDifficulty('good');
                    break;
                case 'Digit4':
                    markDifficulty('easy');
                    break;
            }
        });
    </script>
</body>
</html>